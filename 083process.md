### process

#### 目的
*　Androidアプリのプロセスについて理解

#### ゴール
*　Androidのプロセスの生存期間、プロセスが開始される瞬間、停止する瞬間に関して簡単に説明する事ができる

---
#### processとは
* アプリケーションはアプリ実行用のシングルスレッドを持つアプリケーション用のLinuxプロセスで動作する
* プロセス上にスレッドを立てて動作
* default:同じアプリケーションのすべてのコンポーネントは同じプロセスとスレッド(メインスレッド)で実行する
* コンポーネントが開始したときに既にそのアプリケーションのプロセスが存在する場合、コンポーネントはその既存プロセス内で開始し、同じ実行用のスレッドを使用

#### ライフサイクル
* Androidなどのスマートフォン端末はPCと違い利用できるメモリ領域がかなり小さい
  * そのため、不要なプロセスはシステムによって破棄されます。
* システムはプロセスに優先順位をつけ、その重要度に基づいてプロセスを生成・破棄する

#### 重要度
**1. フォアグラウンドプロセス**
  * ユーザーが現在操作しているアプリのプロセス
  * 次の条件のいずれかにあてはまる場合、そのプロセスはフォアグラウンドにあるとみなされます
    * ユーザーが操作しているActivityのホストになっている（Activity の onResume() メソッドが呼び出された）。
    * ユーザーが操作しているアクティビティにバインドされているServiceのホストになっている。
    * サービスが startForeground() を呼び出した。
    * onCreate()、onStart()、onDestroy() のいずれかのライフサイクル コールバックを実行しているServiceのホストになっている。
    * onReceive() メソッドを実行している BroadcastReceiver のホストになっている。
  * 通常、2〜3個のプロセスが維持されますが、メモリの状況により破棄される可能性があります。
  * メモリが少なくなると、強制終了されます。

**2. 可視プロセス**
  * フォアグラウンドにコンポーネントはないものの、ユーザーに対して画面上に表示される内容に影響を与える可能性のあるプロセスです。
  * 次の条件のいずれかにあてはまる場合、そのプロセスは可視プロセスであるとみなされます。
    * フォアグラウンドにないが、ユーザーに表示されているActivityのホストになっている。(たとえば、フォアグラウンドのアクティビティがダイアログを開始したときに、前のアクティビティがその背後に見えている場合など)
    * 可視（またはフォアグラウンドの）アクティビティにバインドされているServiceのホストになっている
  * フォアグラウンドのプロセスにとって必要がなくなれば強制終了

**3. サービスプロセス**
  * startService()メソッドで開始されたサービスを実行するプロセスで、上の2つのカテゴリに分類されないものです。
  * フォアグラウンドプロセス、可視プロセスを維持するメモリがなくなる場合強制終了されます。

**4. バックグラウンドプロセス**
  * 現在ユーザーに表示されていないアクティビティを含むプロセスです。
  * 他のプロセスがメモリを必要とすればいつでも強制終了されます。通常はバックグラウンドで実行するプロセスは多数あるため、最近ユーザーに表示されたアクティビティのあるプロセスを最後に強制終了するよう、LRU（最小使用頻度）リストに入れられます。
  * いつ強制終了されるかわからないため、適切に状態を保存するように実装を行う必要があります。

**5. 空のプロセス**
  * アクティブなアプリケーションコンポーネントが1つも含まれていないプロセスです。
  * このようなプロセスは、プロセスをキャッシュしておくことのみを目的として保持され、
  * 次回コンポーネントを実行する際の起動時間を向上させることができます。
  * 頻繁にシステムによって強制終了される

---
### 確認問題
* プロセスとはなんですか？
  * アプリ実行用のシングルスレッドを持つアプリケーション用のLinuxプロセス
* プロセスは誰が破棄しますか？
  * システム側
* プロセスの優先度を答えてください。
  * フォアグラウンド
  * 可視プロセス
  * サービスプロセス
  * バックグラウンドプロセス
  * 空のプロセス
